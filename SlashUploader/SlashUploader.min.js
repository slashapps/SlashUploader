/*
 * SlashUploader - JS plugin - Version 1.5.8
 * http://slashuploader.com/
 * Copyright (c) 2018-present Slash Apps Development, http://slash.co.il/
 * Licensed under the MIT License [https://en.wikipedia.org/wiki/MIT_License]
 */

function FileData(e){this.file,this.name,this.size,this.duration,this.width,this.height,this.extension,this.rotation,this.init=function(e){this.file=e;var n=e.name;null==n&&(n=""),this.name=n,this.size=e.size/1024,this.extension=n.substr(n.lastIndexOf(".")+1,5).toLowerCase()},this.init(e)}function SlashUploader(e,n){this.version="1.5.8",this.opts=n,this._internalVariables={},this._internalVariables.instance=this,this._internalVariables.hoverOnBtn=!1,this._internalVariables.draggedOnBtn=!1,this._internalVariables.isUploading=!1,this._internalVariables.draggedOnDocument=!1,this._internalVariables.curUploadingFileIndex=0,this._internalVariables.curUploadingFilesData=[],this._internalVariables.totalFilesToUpload=0,this._internalVariables.BYTES_PER_CHUNK=5e5,this._internalVariables.curMouseX=-1,this._internalVariables.lastMouseX=-1,this._internalVariables.curMouseY=-1,this._internalVariables.lastMouseY=-1,this._internalVariables.uploadXhr=null,this._internalVariables.displayErrorAnimationTimeoutDuration,this._internalVariables.onChangeTriggered=!1,this._internalVariables.uploadErrorCount=0,this._internalVariables.curProgress=0,this._internalVariables.setVariable=function(e){var n=this.instance;"acceptOnlyFilesTypes"==e?noJquery(n.elements.uploaderInputElement).attr("accept",n.acceptOnlyFilesTypes):"capture"==e?"camera"==n.capture||"camcorder"==n.capture||"microphone"==n.capture||"filesystem"==n.capture||"user"==n.capture||"environment"==n.capture?noJquery(n.elements.uploaderInputElement).attr("capture",n.capture):noJquery(n.elements.uploaderInputElement).removeAttr("capture"):"maxFiles"==e?n.maxFiles>1?null!=n.elements.uploaderInputElement&&noJquery(n.elements.uploaderInputElement).attr("multiple","multiple"):null!=n.elements.uploaderInputElement&&noJquery(n.elements.uploaderInputElement).removeAttr("multiple"):"uploadedFilesPosition"==e?("none"!=n.uploadedFilesPosition?(noJquery(n.elements.uploaderDropAreaWrapper).css("width",""),noJquery(n.elements.uploaderDropAreaWrapper).css("display",""),noJquery(n.elements.uploaderResultWrapperElement).attr("style","")):(noJquery(n.elements.uploaderDropAreaWrapper).css("width","100%"),noJquery(n.elements.uploaderResultWrapperElement).attr("style","width: 0px; display: none;")),""==n.uploadedFilesPosition?noJquery(n.elements.containerElement).attr("data-show-uploaded-files","default"):noJquery(n.elements.containerElement).attr("data-show-uploaded-files",n.uploadedFilesPosition.toLowerCase()),n._internalVariables.setHeight()):"disabled"==e?n.disabled?(noJquery(n.elements.containerElement).addClass("disabled"),noJquery(n.elements.uploaderDropAreaElement).find(".input_wrapper").css("display","none")):(noJquery(n.elements.containerElement).removeClass("disabled"),noJquery(n.elements.uploaderDropAreaElement).find(".input_wrapper").css("display","")):"rtl"==e?n.rtl?noJquery(n.elements.containerElement).addClass("rtl"):noJquery(n.elements.containerElement).removeClass("rtl"):"height"==e?n._internalVariables.setHeight():"enableDropFiles"==e?n._internalVariables.setDropFileEvents():"enableCancelButton"==e?n._internalVariables.setCancelButtonDisplay():"progressAnimationType"==e?n._internalVariables.setProgressDisplay():"showFocusRect"==e?n._internalVariables.setShowFocusRect():("maxFileChars"==e||"uploadedFiles"==e||"uploadedFileHtml"==e||"uploadedFileTemplate"==e||"enableDeleteButton"==e||"groupUploadedFilesResult"==e||"groupedUploadedFilesHtml"==e)&&n._internalVariables.showCurrentFiles(),n._internalVariables.setText()};var a={};if(this._internalVariables.defineProperty=function(e,n){var r=this.instance;Object.defineProperty(r,e,{get:function(){return a[e]},set:function(t){a[e]=t,n?r._internalVariables.setVariable(e):r._internalVariables.setVariable()}})},this._internalVariables.defineProperty("acceptOnlyFilesTypes",!0),this._internalVariables.defineProperty("capture ",!0),this._internalVariables.defineProperty("uploadedFilesPosition",!0),this._internalVariables.defineProperty("disabled",!0),this._internalVariables.defineProperty("enableDropFiles",!0),this._internalVariables.defineProperty("enableCancelButton",!0),this._internalVariables.defineProperty("enableDeleteButton",!0),this._internalVariables.defineProperty("maxFiles",!0),this._internalVariables.defineProperty("progressAnimationType",!0),this._internalVariables.defineProperty("maxFileChars",!0),this._internalVariables.defineProperty("uploadedFiles",!0),this._internalVariables.defineProperty("rtl",!0),this._internalVariables.defineProperty("height",!0),this._internalVariables.defineProperty("showFocusRect",!0),this._internalVariables.defineProperty("uploadedFileHtml",!0),this._internalVariables.defineProperty("uploadedFileTemplate",!0),this._internalVariables.defineProperty("groupUploadedFilesResult",!0),this._internalVariables.defineProperty("groupedUploadedFilesHtml",!0),this._internalVariables.defineProperty("browseText",!1),this._internalVariables.defineProperty("browseTextDropDisabled",!1),this._internalVariables.defineProperty("dropFilesText",!1),this._internalVariables.defineProperty("uploadingFileText",!1),this._internalVariables.defineProperty("uploadingFileTextProgressBar",!1),this._internalVariables.defineProperty("uploadingFilesText",!1),this._internalVariables.defineProperty("uploadingFilesTextProgressBar",!1),this._internalVariables.defineProperty("uploadingFileByFileText",!1),this._internalVariables.defineProperty("cancelText",!1),Object.defineProperty(this,"serverScripts",{get:function(){return a.serverScripts},set:function(e){var n=this.serverScripts;noJquery.extend(n,e),a.serverScripts=n}}),Object.defineProperty(this,"errors",{get:function(){return a.errors},set:function(e){var n=this.errors;noJquery.extend(n,e),a.errors=n}}),Object.defineProperty(this,"value",{get:function(){return a.uploadedFiles},set:function(e){a.uploadedFiles=e,this._internalVariables.setVariable("uploadedFiles")}}),Object.defineProperty(this,"isUploading",{get:function(){return null!=this._internalVariables&&this._internalVariables.isUploading}}),this.onFilesSelected=null,this.onFilesUploaded=null,this.onFileDeleted=null,this.onFilesProgress=null,this.onCanceled=null,this.onError=null,this.customValidation=null,this.customHTML=!1,this.uploadTypePriority=["stream","chunks","iframe"],this.fileSizeToForceChunksUpload=5e5,this.resetFilesOnEachUpload=!0,this.iframeGateway="./SlashUploader/iframe_gateway.html",this.doGetFileMetadata=!0,this.allowedFilesExtensions=null,this.allowedMaxFileSize=null,this.showDetailedErrorFromServer=!0,this.displayErrorDuration=4500,this.retryTimes=10,this.retryTimeout=1500,this.status="idle",a.serverScripts={uploadChunk:"./SlashUploader/server/UploadFiles.aspx?upload_method=upload_chunk&file_name={{file_name}}&chunk_index={{chunk_index}}&total_chunks={{total_chunks}}&request_id={{request_id}}&rotation={{rotation}}",uploadStream:"./SlashUploader/server/UploadFiles.aspx?upload_method=upload_stream&file_name={{file_name}}&rotation={{rotation}}",uploadThroughIframe:"./SlashUploader/server/UploadFiles.aspx?upload_method=upload_through_iframe&request_id={{request_id}}&iframe_gateway={{iframe_gateway}}&rotation={{rotation}}",fileNameVariableName:"file_name",fileUrlVariableName:"file_path",errorVariableName:"error"},a.errors={invalidFileExtension:"Invalid file extension ({{file_name}})",invalidFileSize:"Invalid file size ({{file_name}})",uploadFailed:"Failed to upload",parseFailed:"Failed to parse result",unspecifiedError:"Unspecified error",networkError:"Network error"},a.uploadedFilesPosition="",a.disabled=!1,a.enableDropFiles=!0,a.enableCancelButton=!0,a.enableDeleteButton=!0,a.maxFiles=9999,a.progressAnimationType="inline",a.height=80,a.showFocusRect=!1,a.maxFileChars=20,a.uploadedFiles=[],a.groupUploadedFilesResult=!1,a.browseText="Drop files here or click to upload",a.browseTextDropDisabled="Click to upload",a.dropFilesText="Drop files here",a.uploadingFileText='Uploading "{{current_file_name}}"',a.uploadingFileTextProgressBar='Uploading "{{current_file_name}}"',a.uploadingFilesText="Uploading {{total_files}} files",a.uploadingFilesTextProgressBar="Uploading {{total_files}} files",a.uploadingFileByFileText='Uploading "{{current_file_name}}" ({{current_file_index}}/{{total_files}})',a.uploadedFileHtml="<a href='{{current_file_path}}' target='_blank'>{{current_file_name}}</a>",a.groupedUploadedFilesHtml="{{total_files}} files uploaded",a.uploadedFileTemplate=null,a.cancelText="Cancel",this.elements={},this.elements.elementId="SlashUploader_"+Math.floor(999999999*Math.random()),this.elements.containerElement=e,this.elements.uploaderDropAreaElement=null,this.elements.uploaderTextElement=null,this.elements.uploaderDropAreaWrapper=null,this.elements.uploaderDropAreaBottomLayerElement=null,this.elements.uploaderDropAreaMiddleLayerElement=null,this.elements.uploaderResultWrapperElement=null,this.elements.uploaderResultElement=null,this.elements.uploaderProgressContainerElement=null,this.elements.uploaderProgressBrElement=null,this.elements.uploaderProgressBarElement=null,this.elements.uploaderProgressBarPaddingElement=null,this.elements.uploaderProgressBarTextElement=null,this.elements.uploaderProgressBarColorElement=null,this.elements.uploaderInputElement=null,this.elements.uploaderCancelButton=null,-1!=navigator.appVersion.indexOf("MSIE")&&8==parseFloat(navigator.appVersion.split("MSIE")[1])){var r=this,t=a.serverScripts,l=a.errors,i={};setTimeout(function(){!function e(){i.acceptOnlyFilesTypes!=r.acceptOnlyFilesTypes&&r._internalVariables.setVariable("acceptOnlyFilesTypes"),i.capture!=r.capture&&r._internalVariables.setVariable("capture"),i.uploadedFilesPosition!=r.uploadedFilesPosition&&r._internalVariables.setVariable("uploadedFilesPosition"),i.disabled!=r.disabled&&r._internalVariables.setVariable("disabled"),i.enableDropFiles!=r.enableDropFiles&&r._internalVariables.setVariable("enableDropFiles"),i.enableCancelButton!=r.enableCancelButton&&r._internalVariables.setVariable("enableCancelButton"),i.enableDeleteButton!=r.enableDeleteButton&&r._internalVariables.setVariable("enableDeleteButton"),i.maxFiles!=r.maxFiles&&r._internalVariables.setVariable("maxFiles"),i.progressAnimationType!=r.progressAnimationType&&r._internalVariables.setVariable("progressAnimationType"),noJquery(r.elements.uploaderResultElement).hasClass("error")&&""!=noJquery(r.elements.uploaderResultElement).html()||(i.maxFileChars!=r.maxFileChars&&r._internalVariables.setVariable("maxFileChars"),i.uploadedFiles!=r.uploadedFiles&&r._internalVariables.setVariable("uploadedFiles")),i.rtl!=r.rtl&&r._internalVariables.setVariable("rtl"),r._internalVariables.setVariable(),i.acceptOnlyFilesTypes=r.acceptOnlyFilesTypes,i.capture=r.capture,i.uploadedFilesPosition=r.uploadedFilesPosition,i.disabled=r.disabled,i.enableDropFiles=r.enableDropFiles,i.enableCancelButton=r.enableCancelButton,i.enableDeleteButton=r.enableDeleteButton,i.maxFiles=r.maxFiles,i.progressAnimationType=r.progressAnimationType,i.maxFileChars=r.maxFileChars,i.uploadedFiles=r.uploadedFiles,i.rtl=r.rtl,i.height=r.height,i.showFocusRect=r.showFocusRect,noJquery.extend(t,r.serverScripts),r.serverScripts=t,noJquery.extend(l,r.errors),r.errors=l,setTimeout(function(){e()},3e3)}()},250)}this._internalVariables.build=function(){var e=this.instance,n=e._internalVariables.getIEVersion();if(n>=0&&n<=8)for(var r in a)e[r]=a[r];if(null!=e.opts&&(noJquery.extend(e.errors,e.opts.errors),delete e.opts.errors,noJquery.extend(e.serverScripts,e.opts.serverScripts),delete e.opts.serverScripts,noJquery.extend(e,e.opts)),null!=e.elements.containerElement){e.elements.containerElement.tagName.toUpperCase(),noJquery('<form id="'+e.elements.elementId+'_form" name="'+e.elements.elementId+'_form" class="slash_uploader_form"></form>').appendTo("body");var t="";t+='<span id="'+e.elements.elementId+'" name="'+e.elements.elementId+'" class="uploader_container">',e.customHTML?(t+='<div class="uploader_drop_area_custom">',t+="</div>"):(t+='<div class="uploader_div">',t+='	<div class="uploader_drop_area_wrapper">',t+='		<div class="uploader_drop_area_bottom_bg"></div>',t+='		<div class="uploader_drop_area_bottom"><img alt="Selected image preview" /></div>',t+='		<div class="uploader_drop_area_middle"><img alt="Selected image preview" /></div>',t+='		<div class="uploader_drop_area">',t+='			<div class="uploader_text"><div class="uploader_text_container"><div class="uploader_spinner"></div><span></span></div></div>',t+='			<div class="uploader_cancel"><span></span></div>',t+="		</div>",t+="	</div>",t+='	<div class="uploader_result_wrapper"><div class="uploader_result"></div></div>',t+='	<br style="clear: both;" />',t+="</div>",t+='<div class="uploader_progress_container" style="display: none;">',t+="	<table><tr>",t+='		<td class="uploader_progress_bar_loading"><div class="uploader_spinner"></div><span></span></td>',t+='		<td class="uploader_progress_bar_loading_padding"></td>',t+='		<td class="uploader_progress_bar"><div><div></div></div></td>',t+='		<td class="uploader_progress_bar_padding"></td>',t+='		<td class="uploader_progress_bar_text"></td>',t+="	</tr></table>",t+="</div>",t+='<br style="clear: both;" class="uploader_progress_br" />'),t+="</span>",e.customHTML?(noJquery(e.elements.containerElement).css("position","relative"),noJquery(e.elements.containerElement).html(t+noJquery(e.elements.containerElement).html())):noJquery(e.elements.containerElement).html(t),noJquery(e.elements.containerElement).addClass("slash_uploader"),noJquery(e.elements.containerElement).on("mousemove",function(n){var a=this;null!=noJquery(this).find(".uploader_drop_area_wrapper")[0]&&(a=noJquery(this).find(".uploader_drop_area_wrapper")[0]),noJquery(e.elements.uploaderDropAreaElement).find("input").css("left",n.pageX-noJquery(a).offset().left-120),noJquery(e.elements.uploaderDropAreaElement).find("input").css("top",n.pageY-noJquery(a).offset().top-20)}),e.customHTML?e.elements.uploaderDropAreaElement=noJquery(e.elements.containerElement).find(".uploader_drop_area_custom").get(0):e.elements.uploaderDropAreaElement=noJquery(e.elements.containerElement).find(".uploader_drop_area").get(0),e.elements.uploaderTextElement=noJquery(e.elements.containerElement).find(".uploader_drop_area").find(".uploader_text .uploader_text_container").get(0),e.elements.uploaderDropAreaWrapper=noJquery(e.elements.containerElement).find(".uploader_drop_area_wrapper").get(0),e.elements.uploaderDropAreaBottomLayerElement=noJquery(e.elements.containerElement).find(".uploader_drop_area_bottom").get(0),e.elements.uploaderDropAreaMiddleLayerElement=noJquery(e.elements.containerElement).find(".uploader_drop_area_middle").get(0),e.elements.uploaderResultElement=noJquery(e.elements.containerElement).find(".uploader_result").get(0),e.elements.uploaderResultWrapperElement=noJquery(e.elements.containerElement).find(".uploader_result_wrapper").get(0),e.elements.uploaderProgressContainerElement=noJquery(e.elements.containerElement).find(".uploader_progress_container").get(0),e.elements.uploaderProgressBrElement=noJquery(e.elements.containerElement).find(".uploader_progress_br").get(0),e.elements.uploaderProgressBarElement=noJquery(e.elements.containerElement).find(".uploader_progress_bar").get(0),e.elements.uploaderProgressBarPaddingElement=noJquery(e.elements.containerElement).find(".uploader_progress_bar_padding").get(0),e.elements.uploaderProgressBarTextElement=noJquery(e.elements.containerElement).find(".uploader_progress_bar_text").get(0),e.elements.uploaderProgressBarColorElement=noJquery(e.elements.containerElement).find(".uploader_progress_container .uploader_progress_bar div div").get(0),e.elements.uploaderCancelButton=noJquery(e.elements.containerElement).find(".uploader_cancel").get(0),e._internalVariables.buildFileInput(),e._internalVariables.setProgressDisplay(),e._internalVariables.setShowFocusRect(),e._internalVariables.setText(),e._internalVariables.setDocumentEvents(),e._internalVariables.setDropFileEvents(),e._internalVariables.showCurrentFiles(),noJquery(e.elements.uploaderCancelButton).on("click",function(){e.cancelUpload()}),e._internalVariables.validateIframeGatewayPath()}else e._internalVariables.consoleError("Element not exist in DOM.")},this._internalVariables.setShowFocusRect=function(){var e=this.instance;e.showFocusRect?noJquery(e.elements.containerElement).addClass("show_focus_rect"):noJquery(e.elements.containerElement).removeClass("show_focus_rect")},this._internalVariables.setHeight=function(){var e=this.instance,n=e.height;-1!=e.progressAnimationType.indexOf("bar")&&(n-=25),e.customHTML||noJquery(e.elements.containerElement).css("min-height",e.height+"px"),noJquery(e.elements.uploaderDropAreaWrapper).css("height",n+"px"),noJquery(e.elements.uploaderResultWrapperElement).css("height",n+"px"),noJquery(e.elements.uploaderTextElement).css("max-height",n-15+"px")},this._internalVariables.setProgressDisplay=function(){var e=this.instance;null!=e.elements.containerElement&&(null==e.progressAnimationType&&(e.progressAnimationType=""),-1!=e.progressAnimationType.indexOf("bar")?(noJquery(e.elements.containerElement).addClass("loading_bar"),e._internalVariables.isUploading&&null!=e.elements.uploaderProgressContainerElement&&(noJquery(e.elements.uploaderProgressContainerElement).css("display",""),noJquery(e.elements.uploaderProgressBrElement).css("display",""))):(noJquery(e.elements.containerElement).removeClass("loading_bar"),null!=e.elements.uploaderProgressContainerElement&&(noJquery(e.elements.uploaderProgressContainerElement).css("display","none"),noJquery(e.elements.uploaderProgressBrElement).css("display","none"))),null!=e.elements.uploaderDropAreaBottomLayerElement&&(-1!=e.progressAnimationType.indexOf("inline")&&e._internalVariables.isUploading&&("chunks"==e._internalVariables.getUploadType()||"stream"==e._internalVariables.getUploadType())?(noJquery(e.elements.uploaderDropAreaBottomLayerElement).css("display",""),noJquery(e.elements.uploaderDropAreaMiddleLayerElement).css("display","")):(noJquery(e.elements.uploaderDropAreaBottomLayerElement).css("display","none"),noJquery(e.elements.uploaderDropAreaMiddleLayerElement).css("display","none")))),e._internalVariables.setHeight()},this._internalVariables.validateFiles=function(){for(var e=this.instance,n=[],a=0;a<e._internalVariables.curUploadingFilesData.length;a++){var r=e._internalVariables.curUploadingFilesData[a];r.name;var t=r.extension,l=r.size;if(null!=e.allowedFilesExtensions&&e.allowedFilesExtensions.length>0&&-1==noJquery.inArray(t.toLowerCase(),e.allowedFilesExtensions)?n.push({error:"invalid_file_extension",file:r}):null!=e.allowedMaxFileSize&&e.allowedMaxFileSize>0&&l>e.allowedMaxFileSize&&n.push({error:"invalid_file_size",file:r}),0==n.length&&null!=e.allowedMaxFileSize&&e.allowedMaxFileSize>0){var i=e._internalVariables.getIEVersion();i>0&&i<=9&&e._internalVariables.consoleError("Size validation is not possible on IE9 and below")}if("function"==typeof e.customValidation){var s=e.customValidation(r);null!=s&&(s.file=r.file,n.push(s))}}return n},this._internalVariables.buildFileInput=function(){var e=this.instance;noJquery(e.elements.uploaderDropAreaElement).find(".input_wrapper").remove(),noJquery(e.elements.uploaderDropAreaElement).append(noJquery("<div class='input_wrapper'><input id='"+e.elements.elementId+"_input' name='"+e.elements.elementId+"_input' type='file' "+(e.maxFiles>1?"multiple":"")+" /></div>")[0]),e.elements.uploaderInputElement=noJquery(e.elements.containerElement).find("input")[0],null!=e.elements.uploaderInputElement&&(e.elements.uploaderInputElement.onchange=function(){e._internalVariables.onChangeTriggered=!0;var n=this.files;if(null==n){var a={},r=this.value;null!=r&&""!=r&&(-1!=r.indexOf("/")&&(r=r.substr(r.lastIndexOf("/")+1)),-1!=r.indexOf("\\")&&(r=r.substr(r.lastIndexOf("\\")+1)),a.name=r),n=[a]}if(noJquery(e.elements.uploaderDropAreaElement).find("input").css("display","none"),!e._internalVariables.isUploading&&n){e._internalVariables.curUploadingFilesData=[];for(var t=0;t<Math.min(n.length,e.maxFiles);t++){var a=n[t];e._internalVariables.curUploadingFilesData.push(new FileData(a))}e._internalVariables.totalFilesToUpload=Math.min(n.length,e.maxFiles),e._internalVariables.traverseFiles()}setTimeout(function(){e._internalVariables.onChangeTriggered=!1},1)},e._internalVariables.isMobileOrTablet()?(e.elements.uploaderInputElement.ontouchstart=function(){e._internalVariables.hoverOnBtn=!0,e._internalVariables.checkDragFileStates()},e.elements.uploaderInputElement.ontouchend=function(){e._internalVariables.hoverOnBtn=!1,e._internalVariables.checkDragFileStates()}):(e.elements.uploaderInputElement.onmouseover=function(){e._internalVariables.hoverOnBtn=!0,e._internalVariables.checkDragFileStates()},e.elements.uploaderInputElement.onmouseout=function(){e._internalVariables.hoverOnBtn=!1,e._internalVariables.checkDragFileStates()}),e.elements.uploaderInputElement.onfocus=function(){noJquery(e.elements.containerElement).addClass("focused")},e.elements.uploaderInputElement.onblur=function(){noJquery(e.elements.containerElement).removeClass("focused")}),e._internalVariables.setVariable("acceptOnlyFilesTypes"),e._internalVariables.setVariable("capture"),e._internalVariables.setVariable("uploadedFilesPosition"),e._internalVariables.setVariable("disabled"),e._internalVariables.setVariable("rtl"),e._internalVariables.checkDragFileStates()},this._internalVariables.showUploadBtn=function(){var e=this.instance;noJquery(e.elements.uploaderDropAreaBottomLayerElement).css("display","none"),noJquery(e.elements.uploaderDropAreaMiddleLayerElement).css("display","none"),noJquery(e.elements.containerElement).removeClass("uploading"),noJquery(e.elements.containerElement).find("input").attr("onclick",""),e._internalVariables.setText(),e._internalVariables.buildFileInput(),noJquery(e.elements.uploaderProgressContainerElement).css("display","none"),noJquery(e.elements.uploaderProgressBrElement).css("display","none"),noJquery(e.elements.uploaderProgressBarColorElement).css("width","0%"),noJquery(e.elements.uploaderCancelButton).css("display","none")},this._internalVariables.setDropFileEvents=function(){var e=this.instance;null!=e.elements.uploaderDropAreaElement&&(noJquery(e.elements.uploaderDropAreaElement).unbind("dragleave"),noJquery(e.elements.uploaderDropAreaElement).unbind("dragenter, dragover"),noJquery(e.elements.uploaderDropAreaElement).unbind("drop"),e._internalVariables.isDropFilesEnabled()&&(noJquery(e.elements.uploaderDropAreaElement).on("dragleave",function(n){e.disabled||(e._internalVariables.draggedOnBtn=!1,e._internalVariables.checkDragFileStates(),n.preventDefault(),n.stopPropagation())}),noJquery(e.elements.uploaderDropAreaElement).on("dragenter, dragover",function(n){!e.disabled&&!e._internalVariables.isUploading&&e._internalVariables.isDropFilesEnabled()&&("Files"==n.originalEvent.dataTransfer.types[0]||"text/uri-list"==n.originalEvent.dataTransfer.types[0]||"application/x-moz-file"==n.originalEvent.dataTransfer.types[0])&&(e._internalVariables.draggedOnBtn=!0,e._internalVariables.checkDragFileStates(),n.preventDefault(),n.stopPropagation())}),noJquery(e.elements.uploaderDropAreaElement).on("drop",function(n){if(!e.disabled&&!e._internalVariables.isUploading&&e._internalVariables.isDropFilesEnabled()){e._internalVariables.draggedOnBtn=!1,e._internalVariables.draggedOnDocument=!1,e._internalVariables.checkDragFileStates();var a=n.originalEvent.dataTransfer.files;e._internalVariables.curUploadingFilesData=[];for(var r=0;r<Math.min(a.length,e.maxFiles);r++){var t=a[r];e._internalVariables.curUploadingFilesData.push(new FileData(t))}e._internalVariables.totalFilesToUpload=Math.min(a.length,e.maxFiles),noJquery(e.elements.uploaderDropAreaElement).find("input").css("display","none"),"iframe"==e._internalVariables.getUploadType()?(noJquery(e.elements.uploaderDropAreaElement).find("input")[0].files=n.originalEvent.dataTransfer.files,e._internalVariables.onChangeTriggered||setTimeout(function(){try{var n=new Event("change");noJquery(e.elements.uploaderDropAreaElement).find("input")[0].dispatchEvent(n)}catch(a){}},1)):e._internalVariables.traverseFiles(),n.preventDefault(),n.stopPropagation()}})))},this._internalVariables.setDocumentEvents=function(){var e=this.instance;e._internalVariables.isDropFilesEnabled()&&(document.addEventListener("mousemove",function(n){e._internalVariables.curMouseX=n.clientX,e._internalVariables.curMouseY=n.clientY},!1),document.addEventListener("dragover",function(n){!e.disabled&&("Files"==n.dataTransfer.types[0]||"text/uri-list"==n.dataTransfer.types[0]||"application/x-moz-file"==n.dataTransfer.types[0])&&n.dataTransfer&&(n.dataTransfer.dropEffect="none",n.preventDefault())},!1),document.addEventListener("drop",function(n){!e.disabled&&!e._internalVariables.isUploading&&e._internalVariables.isDropFilesEnabled()&&("Files"==n.dataTransfer.types[0]||"text/uri-list"==n.dataTransfer.types[0]||"application/x-moz-file"==n.dataTransfer.types[0])&&(e._internalVariables.draggedOnDocument=!1,e._internalVariables.draggedOnBtn=!1,e._internalVariables.checkDragFileStates(),n.preventDefault(),n.stopPropagation())},!1),document.addEventListener("dragenter",function(n){!e.disabled&&!e._internalVariables.isUploading&&e._internalVariables.isDropFilesEnabled()&&("Files"==n.dataTransfer.types[0]||"text/uri-list"==n.dataTransfer.types[0]||"application/x-moz-file"==n.dataTransfer.types[0])&&(e._internalVariables.draggedOnDocument=!0,e._internalVariables.checkDragFileStates())},!1),noJquery("body").on("mouseleave",function(){e._internalVariables.draggedOnDocument=!1,e._internalVariables.draggedOnBtn=!1,!e.disabled&&!e._internalVariables.isUploading&&e._internalVariables.isDropFilesEnabled()&&e._internalVariables.checkDragFileStates()}),setInterval(e._internalVariables.checkMousePosition,100,e))},this._internalVariables.checkDragFileStates=function(){var e=this.instance;null==e.elements.containerElement||e.disabled||e._internalVariables.isUploading||(noJquery(e.elements.containerElement).removeClass("dragged_enter"),noJquery(e.elements.containerElement).removeClass("dragged_over"),noJquery(e.elements.containerElement).removeClass("hover"),noJquery(e.elements.containerElement).removeClass("uploading"),e._internalVariables.draggedOnBtn?noJquery(e.elements.containerElement).addClass("dragged_over"):e._internalVariables.draggedOnDocument?noJquery(e.elements.containerElement).addClass("dragged_enter"):e._internalVariables.hoverOnBtn&&noJquery(e.elements.containerElement).addClass("hover")),e._internalVariables.setText()},this._internalVariables.checkMousePosition=function(e){(Math.abs(e._internalVariables.curMouseX-e._internalVariables.lastMouseX)>5||Math.abs(e._internalVariables.curMouseY-e._internalVariables.lastMouseY)>5)&&(e._internalVariables.draggedOnDocument=!1,e._internalVariables.checkDragFileStates()),e._internalVariables.lastMouseX=e._internalVariables.curMouseX,e._internalVariables.lastMouseY=e._internalVariables.curMouseY},this._internalVariables.setText=function(){var e=this.instance,n="";e.disabled||e._internalVariables.isUploading?e._internalVariables.isUploading?(n=e._internalVariables.getUploadingText(),null!=e.elements.uploaderTextElement&&noJquery(e.elements.uploaderTextElement).find(".uploader_spinner").css("display","")):(n=e._internalVariables.isDropFilesEnabled()?e.browseText:e.browseTextDropDisabled,null!=e.elements.uploaderTextElement&&noJquery(e.elements.uploaderTextElement).find(".uploader_spinner").css("display","none")):(e._internalVariables.draggedOnBtn?n=e.dropFilesText:e._internalVariables.draggedOnDocument?n=e.dropFilesText:(e._internalVariables.hoverOnBtn,n=e._internalVariables.isDropFilesEnabled()?e.browseText:e.browseTextDropDisabled),null!=e.elements.uploaderTextElement&&noJquery(e.elements.uploaderTextElement).find(".uploader_spinner").css("display","none")),null!=e.elements.uploaderTextElement&&noJquery(e.elements.uploaderTextElement).find("span").html(n),null!=e.elements.uploaderCancelButton&&noJquery(e.elements.uploaderCancelButton).find("span").html(e.cancelText),null!=e.elements.uploaderInputElement&&noJquery(e.elements.uploaderInputElement).attr("aria-label",n)},this._internalVariables.getUploadingText=function(){var e=this.instance,n="",a=Math.min(e._internalVariables.curUploadingFilesData.length,e.maxFiles);return n=(n="chunks"==e._internalVariables.getUploadType()||"stream"==e._internalVariables.getUploadType()?null==e._internalVariables.curUploadingFilesData||e._internalVariables.curUploadingFilesData.length<=1||1==e.maxFiles?e.uploadingFileText:e.uploadingFileByFileText:1==a?e.uploadingFileText:e.uploadingFilesText).split("{{current_file_index}}").join(e._internalVariables.curUploadingFileIndex+1),n=(n=e._internalVariables.curUploadingFilesData.length>e._internalVariables.curUploadingFileIndex?n.split("{{current_file_name}}").join(e._internalVariables.getShortFilename(e._internalVariables.curUploadingFilesData[e._internalVariables.curUploadingFileIndex].name)):n.split("{{current_file_name}}").join("")).split("{{total_files}}").join(a)},this._internalVariables.getShortFilename=function(e){var n=this.instance,a=e;a=(a=(a=a.substring(a.lastIndexOf("/")+1,a.length)).substring(a.lastIndexOf("\\")+1,a.length)).substring(0,a.lastIndexOf("."));var r=e.substring(e.lastIndexOf("."),e.length);return a.length+r.length+1>n.maxFileChars&&(a=a.substring(0,n.maxFileChars-3-r.length)+"..."),a+r},this._internalVariables.replaceFileDataParams=function(e,n){for(var a in n=n.split("{{rotation}}").join(e.rotation||"").split("{{size}}").join(e.size||"").split("{{duration}}").join(e.duration||"").split("{{width}}").join(e.width||"").split("{{height}}").join(e.height||"").split("{{extension}}").join(e.extension||""),e)n=n.split("{{"+a+"}}").join(e[a]);return n},this._internalVariables.traverseFiles=function(){var e=this.instance;void 0!==e._internalVariables.curUploadingFilesData&&e._internalVariables.curUploadingFilesData.length>0&&(e.resetFilesOnEachUpload&&(e.uploadedFiles=[]),e._internalVariables.curUploadingFileIndex=0,e._internalVariables.getFilesMetadata())},this._internalVariables.getFilesMetadata=function(){this.instance._internalVariables.getNextFileMetadata()},this._internalVariables.getNextFileMetadata=function(){var e=this.instance,n=e._internalVariables.curUploadingFilesData[e._internalVariables.curUploadingFileIndex].file,a=n.name;null==a&&(a="");var r={file:n,name:a,size:n.size,extension:a.substr(a.lastIndexOf(".")+1,5),type:n.type,width:null,height:null,rotation:null,duration:null};if(e._internalVariables.isImg(n.name)&&e.doGetFileMetadata)"undefined"!=typeof FileReader?setTimeout(function(){var t,l=new FileReader,i=setTimeout(function(){l.onload=null,null!=t&&(t.onload=null),e._internalVariables.consoleError("Failed retrieving meta data for '"+a+"'"),e._internalVariables.getFileMetaFinished(n,r)},400);l.onload=function(n){e._internalVariables.getOrientation(n.target.result,function(e){var n=0;e>0&&(5==e||6==e?n=90:3==e||4==e?n=180:(7==e||8==e)&&(n=270)),r.rotation=n})},l.onloadend=function(a){var t=new Image,l=new Uint8Array(a.target.result),s=new Blob([l.buffer]);t.src=URL.createObjectURL(s),t.onload=function(){clearTimeout(i),r.width=this.width,r.height=this.height,e._internalVariables.getFileMetaFinished(n,r)}},l.readAsArrayBuffer(n)},2):(e._internalVariables.consoleError("Can't get Exif data since browser doesn't support FileReader"),e._internalVariables.getFileMetaFinished(n,r));else if((e._internalVariables.isVideo(n.name)||e._internalVariables.isAudio(n.name))&&e.doGetFileMetadata){if("undefined"!=typeof FileReader){var t=document.createElement(e._internalVariables.isVideo(n.name)?"video":"audio");t.preload="metadata";var l=setTimeout(function(){t.onloadedmetadata=null,e._internalVariables.consoleError("Failed retrieving meta data for '"+a+"'"),e._internalVariables.getFileMetaFinished(n,r)},400);t.onloadedmetadata=function(){clearTimeout(l),window.URL.revokeObjectURL(t.src);var a=null,i=null;null!=t.width&&t.width>0&&(i=t.width),null!=t.videoWidth&&t.videoWidth>0&&(i=t.videoWidth),null!=t.height&&t.height>0&&(a=t.height),null!=t.videoHeight&&t.videoHeight>0&&(a=t.videoHeight),r.duration=t.duration,r.width=i,r.height=a,e._internalVariables.getFileMetaFinished(n,r)},t.src=URL.createObjectURL(n)}else e._internalVariables.consoleError("Can't get file meta data since browser doesn't support FileReader"),e._internalVariables.getFileMetaFinished(n,r)}else e._internalVariables.getFileMetaFinished(n,r)},this._internalVariables.getFileMetaFinished=function(e,n){var a=this.instance,r=a._internalVariables.curUploadingFilesData[a._internalVariables.curUploadingFileIndex];if(r.duration=n.duration||null,r.width=n.width||null,r.height=n.height||null,r.rotation=n.rotation||null,a._internalVariables.curUploadingFilesData.length<=a._internalVariables.curUploadingFileIndex+1||a._internalVariables.curUploadingFileIndex+1>=a.maxFiles){var t=a._internalVariables.validateFiles();0==t.length?(a._internalVariables.curUploadingFileIndex=0,a._internalVariables.onFileProgress(0),"function"==typeof a.onFilesSelected?a.onFilesSelected.length>1?a.onFilesSelected(a._internalVariables.curUploadingFilesData,function(){a._internalVariables.uploadFile()}):(a.onFilesSelected(a._internalVariables.curUploadingFilesData),a._internalVariables.uploadFile()):a._internalVariables.uploadFile()):a._internalVariables.parseErrors(t),noJquery(a.elements.containerElement).removeClass("focused")}else a._internalVariables.curUploadingFileIndex++,a._internalVariables.getNextFileMetadata()},this._internalVariables.uploadFile=function(){var e=this.instance;noJquery(e.elements.uploaderDropAreaBottomLayerElement).find("img").attr("src",""),noJquery(e.elements.uploaderDropAreaMiddleLayerElement).find("img").attr("src",""),noJquery(e.elements.uploaderDropAreaBottomLayerElement).css("transition","width 0s"),noJquery(e.elements.uploaderDropAreaBottomLayerElement).css("-webkit-transition","width 0s"),noJquery(e.elements.uploaderDropAreaBottomLayerElement).css("width",0),setTimeout(function(){noJquery(e.elements.uploaderDropAreaBottomLayerElement).css("transition","width .2s"),noJquery(e.elements.uploaderDropAreaBottomLayerElement).css("-webkit-transition","width .2s")},10),-1!=e.progressAnimationType.indexOf("bar")&&(noJquery(e.elements.uploaderProgressContainerElement).css("display",""),noJquery(e.elements.uploaderProgressBrElement).css("display","")),noJquery(e.elements.uploaderProgressBarTextElement).css("display",""),"iframe"==e._internalVariables.getUploadType()?(noJquery(e.elements.uploaderProgressBarElement).find("div").css("display","none"),noJquery(e.elements.uploaderProgressBarTextElement).css("width","auto"),noJquery(e.elements.uploaderProgressBarPaddingElement).css("display","none")):(noJquery(e.elements.uploaderProgressBarElement).find("div").css("display",""),noJquery(e.elements.uploaderProgressBarTextElement).css("width","1%"),noJquery(e.elements.uploaderProgressBarPaddingElement).css("display",""),e._internalVariables.isMobileOrTablet()&&noJquery(e.elements.uploaderProgressBarTextElement).css("display","none")),noJquery(e.elements.uploaderResultElement).removeClass("error"),e._internalVariables.showCurrentFiles();var n=e._internalVariables.curUploadingFilesData,a=e._internalVariables.curUploadingFileIndex,r="";r=(r=(r=n.length>1&&e.maxFiles>1?e.uploadingFilesTextProgressBar:e.uploadingFileTextProgressBar).split("{{total_files}}").join(Math.min(e._internalVariables.curUploadingFilesData.length,e.maxFiles))).split("{{current_file_name}}").join(e._internalVariables.getShortFilename(n[a].name)),noJquery(e.elements.uploaderProgressBarTextElement).html(r),e._internalVariables.isUploading=!0,e.status="uploading",e._internalVariables.onFileProgress(0),e._internalVariables.setCancelButtonDisplay(),e._internalVariables.setProgressDisplay(),noJquery(e.elements.containerElement).find("input").attr("onclick","return false;"),e._internalVariables.setText(),noJquery(e.elements.containerElement).removeClass("dragged_enter"),noJquery(e.elements.containerElement).removeClass("dragged_over"),noJquery(e.elements.containerElement).removeClass("hover"),noJquery(e.elements.containerElement).addClass("uploading"),noJquery(e.elements.uploaderDropAreaBottomLayerElement).find("img").css("width",noJquery(e.elements.uploaderDropAreaElement).outerWidth()),noJquery(e.elements.uploaderDropAreaMiddleLayerElement).find("img").css("width",noJquery(e.elements.uploaderDropAreaElement).outerWidth());var t=null;"undefined"!=typeof URL&&(t=URL.createObjectURL(n[a].file)),null!=t&&""!=t&&e._internalVariables.isImg(n[a].name)?(noJquery(e.elements.uploaderDropAreaBottomLayerElement).find("img").attr("src",t).css("display",""),noJquery(e.elements.uploaderDropAreaMiddleLayerElement).find("img").attr("src",t).css("display",""),noJquery(e.elements.uploaderDropAreaBottomLayerElement).css("opacity","0"),noJquery(e.elements.uploaderDropAreaBottomLayerElement).find("img").unbind("load"),noJquery(e.elements.uploaderDropAreaBottomLayerElement).find("img").on("load",function(){noJquery(this).parent().animate({opacity:1},400)}),noJquery(e.elements.uploaderDropAreaMiddleLayerElement).css("opacity","0"),noJquery(e.elements.uploaderDropAreaMiddleLayerElement).find("img").unbind("load"),noJquery(e.elements.uploaderDropAreaMiddleLayerElement).find("img").on("load",function(){noJquery(this).parent().animate({opacity:1},400)})):(noJquery(e.elements.uploaderDropAreaBottomLayerElement).find("img").attr("src","").css("display","none"),noJquery(e.elements.uploaderDropAreaMiddleLayerElement).find("img").attr("src","").css("display","none"),noJquery(e.elements.uploaderDropAreaBottomLayerElement).animate({opacity:1},400),noJquery(e.elements.uploaderDropAreaMiddleLayerElement).animate({opacity:1},400));var l="";if("chunks"==e._internalVariables.getUploadType()){var i=e._internalVariables.curUploadingFilesData[a],s=n[a].file;e._internalVariables.uploadErrorCount=0,e._internalVariables.uploadFileChunk(i,Math.floor(999999999*Math.random()),s,0,0,e._internalVariables.BYTES_PER_CHUNK)}else if("stream"==e._internalVariables.getUploadType()){var i=e._internalVariables.curUploadingFilesData[a],o=i.name,d=new XMLHttpRequest;e._internalVariables.uploadXhr=d,d.upload.addEventListener("progress",function(n){n.lengthComputable&&e._internalVariables.onFileProgress(n.loaded/n.total)},!1),d.addEventListener("load",function(){var r=d.responseText;try{e._internalVariables.curUploadingFileIndex++;var t=e._internalVariables.curUploadingFilesData.length<=e._internalVariables.curUploadingFileIndex||e._internalVariables.curUploadingFileIndex>=e.maxFiles;t&&e._internalVariables.curUploadingFileIndex--;var l=JSON.parse(r);function i(){e._internalVariables.parseUploadResult(l,t,n[a].file),!t&&e._internalVariables.curUploadingFilesData.length>0&&e._internalVariables.uploadFile()}null!=e.elements.uploaderDropAreaBottomLayerElement?noJquery(e.elements.uploaderDropAreaBottomLayerElement).animate({opacity:0},200,function(){i()}):i(),noJquery(e.elements.uploaderDropAreaMiddleLayerElement).animate({opacity:0},200)}catch(s){e._internalVariables.consoleError(s),e._internalVariables.setError("parse_failed",n[a],r),e._internalVariables.uploadXhr=null}},!1),l=(l=e.serverScripts.uploadStream).split("{{file_name}}").join(encodeURIComponent(o)),l=e._internalVariables.replaceFileDataParams(i,l),l+="&_="+Math.random(),d.open("post",l,!0),d.setRequestHeader("Content-Type","multipart/form-data"),d.setRequestHeader("X-File-Name",encodeURIComponent(o)),d.setRequestHeader("X-File-Type",i.type),d.send(n[a].file)}else e._internalVariables.uploadUsingIframe()},this._internalVariables.uploadUsingIframe=function(){for(var e=this.instance,n="",a="",r="",t="",l="",i="",s=0;s<e._internalVariables.curUploadingFilesData.length;s++)n+=e._internalVariables.curUploadingFilesData[s].rotation||"",a+=e._internalVariables.curUploadingFilesData[s].size||"",r+=e._internalVariables.curUploadingFilesData[s].duration||"",t+=e._internalVariables.curUploadingFilesData[s].width||"",l+=e._internalVariables.curUploadingFilesData[s].height||"",i+=e._internalVariables.curUploadingFilesData[s].extension||"",s<e._internalVariables.curUploadingFilesData.length-1&&(n+=",",a+=",",r+=",",t+=",",l+=",",i+=",");var o=e.serverScripts.uploadThroughIframe;o=o.split("{{rotation}}").join(n).split("{{size}}").join(a).split("{{duration}}").join(r).split("{{width}}").join(t).split("{{height}}").join(l).split("{{extension}}").join(i),e._internalVariables.onFileProgress(0),uploaerIframeGateway.uploadViaIframeGateway(e,e.elements.elementId,o,e._internalVariables.getIframeGatewayFullUrl(),function(n){e._internalVariables.curUploadingFileIndex=e._internalVariables.totalFilesToUpload-1,e._internalVariables.onFileProgress(1),null==e.elements.uploaderDropAreaBottomLayerElement?e._internalVariables.parseUploadResult(n,!0,null):noJquery(e.elements.uploaderDropAreaBottomLayerElement).animate({opacity:0},200,function(){e._internalVariables.parseUploadResult(n,!0,null)}),noJquery(e.elements.uploaderDropAreaMiddleLayerElement).animate({opacity:0},200,function(){})})},this._internalVariables.setCancelButtonDisplay=function(){var e=this.instance;e.enableCancelButton&&e._internalVariables.isUploading?noJquery(e.elements.uploaderCancelButton).css("display","block"):noJquery(e.elements.uploaderCancelButton).css("display","none")},this._internalVariables.uploadFileChunk=function(e,n,a,r,t,l){var i,s=this.instance,o=s.serverScripts.uploadChunk+"&_="+Math.random(),d=a.size;a.slice?i=a.slice(t,l):a.mozSlice?i=a.mozSlice(t,l):a.webkitSlice&&(i=a.webkitSlice(t,l));var u=d%s._internalVariables.BYTES_PER_CHUNK==0?d/s._internalVariables.BYTES_PER_CHUNK:Math.floor(d/s._internalVariables.BYTES_PER_CHUNK)+1,p=new XMLHttpRequest;s._internalVariables.uploadXhr=p,p.onload=function(){},p.onerror=function(i){s._internalVariables.uploadErrorCount++,s._internalVariables.uploadErrorCount<s.retryTimes?setTimeout(function(){s._internalVariables.uploadFileChunk(e,n,a,r,t,l)},s.retryTimeout):s._internalVariables.uploadUsingIframe()},p.onreadystatechange=function(i){if(4===p.readyState){if(200===p.status){var o=!1,d=null;try{if(d=JSON.parse(this.response),Array.isArray(d)){for(var m=0;m<d.length;m++)if(null!=d[m][s.serverScripts.errorVariableName]&&""!=d[m][s.serverScripts.errorVariableName]){s._internalVariables.setError("upload_failed",e,d[m]),o=!0;break}}else"object"==typeof d?null!=d[s.serverScripts.errorVariableName]&&""!=d[s.serverScripts.errorVariableName]&&(s._internalVariables.setError("upload_failed",e,d),o=!0):(s._internalVariables.setError("parse_failed",e,null),o=!0)}catch(c){s._internalVariables.setError("parse_failed",e),s._internalVariables.consoleError(c),o=!0}if(o)s._internalVariables.abortAndCancelUpload();else if(s._internalVariables.uploadErrorCount=0,null!=d&&(Array.isArray(d)&&d.length>0&&null!=d[0][s.serverScripts.fileNameVariableName]&&""!=d[0][s.serverScripts.fileNameVariableName]||"object"==typeof d&&null!=d[s.serverScripts.fileNameVariableName]&&""!=d[s.serverScripts.fileNameVariableName])){s._internalVariables.curUploadingFileIndex++;var h=s._internalVariables.curUploadingFilesData.length<=s._internalVariables.curUploadingFileIndex||s._internalVariables.curUploadingFileIndex>=s.maxFiles;s._internalVariables.parseUploadResult(d,h,e),!h&&s._internalVariables.curUploadingFilesData.length>0?s._internalVariables.uploadFile():s._internalVariables.onFileProgress(1),s._internalVariables.uploadXhr=null}else null!=s._internalVariables.onFileProgress&&"function"==typeof s._internalVariables.onFileProgress&&s._internalVariables.onFileProgress((r+1)/u),r<u&&(l=(t=l)+s._internalVariables.BYTES_PER_CHUNK,r++,s._internalVariables.isUploading&&s._internalVariables.uploadFileChunk(e,n,a,r,t,l))}else 0===p.status||(s._internalVariables.uploadErrorCount++,s._internalVariables.uploadErrorCount<s.retryTimes?setTimeout(function(){s._internalVariables.uploadFileChunk(e,n,a,r,t,l)},s.retryTimeout):s._internalVariables.uploadUsingIframe())}};var m=o.split("{{file_name}}").join(encodeURIComponent(e.name)).split("{{chunk_index}}").join(r).split("{{total_chunks}}").join(u).split("{{request_id}}").join(n);m=s._internalVariables.replaceFileDataParams(e,m),p.open("POST",m),p.send(i)},this._internalVariables.onFileProgress=function(e){var n=this.instance;n._internalVariables.curProgress=e;var a=Math.min(n._internalVariables.curUploadingFilesData.length,n.maxFiles);if("function"==typeof n.onFilesProgress&&n.onFilesProgress(e,n._internalVariables.curUploadingFileIndex,n._internalVariables.totalFilesToUpload),-1!=n.progressAnimationType.indexOf("bar")){var r=100/a,t=r*n._internalVariables.curUploadingFileIndex+r*e;noJquery(n.elements.uploaderProgressBarColorElement).css("width",t+"%")}if(-1!=n.progressAnimationType.indexOf("inline")){var l=100,i=n._internalVariables.getIEVersion();i>=9&&i<=10&&(l=99),noJquery(n.elements.uploaderDropAreaBottomLayerElement).css("width",Math.ceil(e*l)+"%"),noJquery(n.elements.uploaderDropAreaMiddleLayerElement).css("width",noJquery(n.elements.uploaderDropAreaElement).outerWidth())}noJquery(n.elements.containerElement).attr("data-file-progress",Math.ceil(100*e))},this.cancelUpload=function(){this._internalVariables.abortAndCancelUpload(),"function"==typeof this.onCanceled&&this.onCanceled()},this.destroy=function(){this._internalVariables.abortAndCancelUpload(),this.customHTML?noJquery("#"+this.elements.elementId).remove():noJquery(this.elements.containerElement).html(""),noJquery(this.elements.containerElement).removeClass("slash_uploader"),noJquery(this.elements.containerElement).removeAttr("data-show-uploaded-files"),noJquery(this.elements.containerElement).removeAttr("data-file-progress"),noJquery("#"+this.elements.elementId+"_form").remove()},this._internalVariables.abortAndCancelUpload=function(){var e=this.instance;e._internalVariables.curUploadingFilesData=[],null!=e._internalVariables.uploadXhr&&(e._internalVariables.uploadXhr.abort(),e._internalVariables.uploadXhr=null),e._internalVariables.isUploading=!1,e.status="canceled",e._internalVariables.showUploadBtn(),"iframe"==e._internalVariables.getUploadType()&&uploaerIframeGateway.cancelUpload(e.elements.elementId,e._internalVariables.getIframeGatewayFullUrl())},this._internalVariables.parseUploadResult=function(e,n,a){var r=this.instance,t=!1;if(Array.isArray(e))for(var l=0;l<e.length;l++){if(null==e[l][r.serverScripts.fileNameVariableName]||""==e[l][r.serverScripts.fileNameVariableName]){(null==e[l][r.serverScripts.errorVariableName]||""==e[l][r.serverScripts.errorVariableName])&&r._internalVariables.consoleError("Parameter '"+r.serverScripts.fileNameVariableName+"' not found on returned JSON object"),r._internalVariables.setError("upload_failed",a,e[l]),t=!0;break}e[l].file_name=e[l][r.serverScripts.fileNameVariableName],e[l].file_path=e[l][r.serverScripts.fileUrlVariableName],e[l].error=e[l][r.serverScripts.errorVariableName],r.uploadedFiles.push(e[l])}else"object"==typeof e?null==e[r.serverScripts.fileNameVariableName]||""==e[r.serverScripts.fileNameVariableName]?((null==e[r.serverScripts.errorVariableName]||""==e[r.serverScripts.errorVariableName])&&r._internalVariables.consoleError("Parameter '"+r.serverScripts.fileNameVariableName+"' not found on returned JSON object"),r._internalVariables.setError("upload_failed",a,e),t=!0):(e.file_name=e[r.serverScripts.fileNameVariableName],e.file_path=e[r.serverScripts.fileUrlVariableName],e.error=e[r.serverScripts.errorVariableName],r.uploadedFiles.push(e)):(r._internalVariables.setError("parse_failed",a,null),t=!0);r.uploadedFiles.length>r.maxFiles&&r.uploadedFiles.shift(),n&&!t&&(r._internalVariables.isUploading=!1,r.status="uploaded","function"==typeof r.onFilesUploaded&&r.onFilesUploaded(r.uploadedFiles),r._internalVariables.showCurrentFiles(),r._internalVariables.showUploadBtn())},this._internalVariables.showCurrentFiles=function(){var e=this.instance;if(null!=e.elements.uploaderResultElement){clearTimeout(e._internalVariables.displayErrorAnimationTimeoutDuration);var n="<a class='uploader_delete_btn' data-index='{{index}}' href='javascript: void(0);'><div></div></a>&nbsp;";if(e.enableDeleteButton||(n=""),null==e.uploadedFiles||0==e.uploadedFiles.length)noJquery(e.elements.uploaderResultElement).html("");else{var a="",r=!1;if(e.groupUploadedFilesResult){var t="";if("function"==typeof e.uploadedFileTemplate){r=!0;try{t=e.uploadedFileTemplate(e.uploadedFiles)}catch(l){e._internalVariables.consoleError("Error with uploadedFileTemplate: "+l),r=!1}}if(!r){var t=e.groupedUploadedFilesHtml;void 0===t&&(t=""),t=t.split("{{total_files}}").join(e.uploadedFiles.length)}a="<div class='uploader_result_file'>"+n.split("{{index}}").join("all")+t+"</div>"}else{if("function"==typeof e.uploadedFileTemplate){r=!0;for(var i=0;i<e.uploadedFiles.length;i++){var s=e.uploadedFiles[i];if(null!=s.file_name&&""!=s.file_name)try{var o=e.uploadedFileTemplate(s);a+="<div class='uploader_result_file'>"+n.split("{{index}}").join(i)+o+"</div>"}catch(d){e._internalVariables.consoleError("Error with uploadedFileTemplate: "+d),r=!1;break}}}if(!r){a="";for(var i=0;i<e.uploadedFiles.length;i++){var s=e.uploadedFiles[i];if(null!=s.file_name&&""!=s.file_name){var o=e.uploadedFileHtml;void 0===o&&(o=""),o=o.split("{{current_file_path}}").join(s.file_path).split("{{current_file_name}}").join(e._internalVariables.getShortFilename(s.file_name)),a+="<div class='uploader_result_file'>"+n.split("{{index}}").join(i)+o+"</div>"}}}}noJquery(e.elements.uploaderResultElement).html(a)}for(var u=e.elements.containerElement.querySelectorAll(".uploader_delete_btn"),i=0;i<u.length;i++)noJquery(u.item(i)).on("click",function(){e.disabled||e._internalVariables.deleteFile(noJquery(this).attr("data-index"))});noJquery(e.elements.uploaderResultElement).fadeIn()}},this._internalVariables.deleteFile=function(e){var n=this.instance;if("all"==e)for(;n.uploadedFiles.length>0;){var a=n.uploadedFiles.splice(0,1);"function"==typeof n.onFileDeleted&&n.onFileDeleted(a[0],n.uploadedFiles)}else{parseInt(e);var a=n.uploadedFiles.splice(e,1);"function"==typeof n.onFileDeleted&&n.onFileDeleted(a[0],n.uploadedFiles)}n._internalVariables.showCurrentFiles()},this._internalVariables.setError=function(e,n,a){var r=this.instance,t=[];t.push({error:e,file:n,error_object:a}),r._internalVariables.parseErrors(t)},this._internalVariables.parseErrors=function(e){for(var n=this.instance,a="",r=0;r<e.length;r++){var t,l=e[r];if(null!=(t="invalid_file_extension"==l.error||null!=l.error_object&&"invalid_file_extension"==l.error_object.error?n.errors.invalidFileExtension:"invalid_file_size"==l.error||null!=l.error_object&&"invalid_file_size"==l.error_object.error?n.errors.invalidFileSize:"parse_failed"==l.error||null!=l.error_object&&"parse_failed"==l.error_object.error?n.errors.parseFailed:"network_error"==l.error?n.errors.networkError:"upload_failed"==l.error?n.showDetailedErrorFromServer&&null!=l.error_object&&null!=l.error_object.error&&""!=l.error_object.error?l.error_object.error:n.errors.uploadFailed:null!=l.error_text?l.error_text:n.errors.unspecifiedError)){var i=l.file;null!=i&&(t=t.split("{{file_name}}").join(n._internalVariables.getShortFilename(i.name))),l.error_text=t,""!=a&&(a+="<br>"),a+=t}}noJquery(n.elements.uploaderResultElement).addClass("error"),noJquery(n.elements.uploaderResultElement).html(a).css("opacity","0").fadeIn(),n._internalVariables.abortAndCancelUpload(),n.status="error","function"==typeof n.onError&&n.onError(e),n._internalVariables.hoverOnBtn=!1,n._internalVariables.checkDragFileStates(),clearTimeout(n._internalVariables.displayErrorAnimationTimeoutDuration),n._internalVariables.displayErrorAnimationTimeoutDuration=setTimeout(function(){noJquery(n.elements.uploaderResultElement).fadeOut(function(){n._internalVariables.showCurrentFiles()})},n.displayErrorDuration)},this._internalVariables.consoleError=function(e){var n=!!window.MSInputMethodContext&&!!document.documentMode,a=-1!=navigator.userAgent.indexOf("MSIE"),r="";null!=arguments&&null!=arguments.callee&&null!=arguments.callee.caller&&(r=arguments.callee.caller.toString()),(null==r||""==r)&&null!=this._internalVariables.consoleError.caller&&(r=this._internalVariables.consoleError.caller.toString()),"undefined"!=typeof console&&(n||a?console.warn("SlashUploader: "+e):console.log("%c SlashUploader: "+e,"background: #222; color: #bada55; padding: 10px;"))},this._internalVariables.getUploadType=function(){var e=this.instance;if(null!=e.uploadTypePriority&&e.uploadTypePriority.length>0)for(var n=0;n<e.uploadTypePriority.length;n++){if("stream"==e.uploadTypePriority[n]&&e._internalVariables.canUploadFileInStream())return"stream";if("chunks"==e.uploadTypePriority[n]&&e._internalVariables.canUploadFileInChunks())return"chunks";if("iframe"==e.uploadTypePriority[n]&&e._internalVariables.canUploadFileUsingIframe())return"iframe"}if(e._internalVariables.canUploadFileInStream()){var a=!1;if(null!=e._internalVariables.curUploadingFilesData&&e._internalVariables.curUploadingFilesData.length>0){for(var n=0;n<e._internalVariables.curUploadingFilesData.length;n++)if(e._internalVariables.curUploadingFilesData[n].size>=e.fileSizeToForceChunksUpload){a=!0;break}}return a&&e._internalVariables.canUploadFileInChunks()?"chunks":"stream"}return e._internalVariables.canUploadFileInChunks()?"chunks":"iframe"},this._internalVariables.canUploadFileInChunks=function(){var e=this.instance;if(null==e.serverScripts.uploadChunk||""==e.serverScripts.uploadChunk)return!1;var n=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),a=/iphone|ipod|ipad/.test(navigator.userAgent);if((n||a)&&e._internalVariables.isCrossDomainScript(e.serverScripts.uploadChunk))return!1;var r=e._internalVariables.getIEVersion();return!(r>=0)||!(r<=9)},this._internalVariables.canUploadFileUsingIframe=function(){var e=this.instance;return null!=e.iframeGateway&&""!=e.iframeGateway&&null!=e.serverScripts.uploadThroughIframe&&""!=e.serverScripts.uploadThroughIframe},this._internalVariables.canUploadFileInStream=function(){var e=this.instance;if(null==e.serverScripts.uploadStream||""==e.serverScripts.uploadStream)return!1;var n=e._internalVariables.getEdgeVersion(),a=e._internalVariables.getIEVersion();return(!(n>0)||!(n<18))&&(!(a>=0)||!(a<=9))&&!e._internalVariables.isCrossDomainScript(e.serverScripts.uploadStream)},this._internalVariables.isCrossDomainScript=function(e){if(this.instance,0==e.indexOf("http:")||0==e.indexOf("https:")||0==e.indexOf("//")){var n="";if(-1!=(n=e.indexOf("://")>-1?e.split("/")[2]:0==e.indexOf("//")?(e=e.substring(2)).split("/")[0]:e.split("/")[0]).indexOf(":")){var a=n.split(":")[1];if((""==window.location.port||"80"==window.location.port||"443"==window.location.port)&&(""==a||"80"==a||"443"==a));else if(a!=window.location.port)return!0}if((n=n.split(":")[0]).toLowerCase()!=window.location.host.toLowerCase())return!0}return!1},this._internalVariables.getIEVersion=function(){var e=-1;return -1!=navigator.appVersion.indexOf("MSIE")&&(e=parseFloat(navigator.appVersion.split("MSIE")[1])),navigator.userAgent.match(/Trident.*rv\:11\./)&&(e=11),e},this._internalVariables.getEdgeVersion=function(){var e=-1;return -1!=navigator.userAgent.indexOf("Edge")&&(e=parseFloat(navigator.userAgent.split("Edge/")[1])),e},this._internalVariables.isMobileOrTablet=function(){var e,n=!1;return e=navigator.userAgent||navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4)))&&(n=!0),n},this._internalVariables.videoFileTypes=[".3gp2",".3gpp",".3gpp2",".asf",".asx",".avi",".flv",".m4v",".mkv",".mov",".mpeg",".mpg",".mpe",".m1s",".mpa",".mp2",".m2a",".mp2v",".m2v",".m2s",".mp4",".ogg",".rm",".wmv",".mp4",".qt",".ogm",".vob",".webm",".787",".ogv"],this._internalVariables.audioFileTypes=[".3gp",".act",".aiff",".aac",".alac",".amr",".atrac",".au",".awb",".dct",".dss",".dvf",".flac",".gsm",".iklax",".ivs",".m4a",".m4p",".mmf",".mp3",".mpc",".msv",".ogg",".opus",".raw",".tta",".vox",".wav",".wma"],this._internalVariables.imageFileTypes=[".jpg",".jpeg",".png",".tiff",".bmp",".gif"],this._internalVariables.isFileType=function(e,n){var a=e.substr(e.lastIndexOf("."),5);return a=a.toLowerCase(),-1!=noJquery.inArray(a.toLowerCase(),n)},this._internalVariables.isImg=function(e){var n=this.instance;return n._internalVariables.isFileType(e,n._internalVariables.imageFileTypes)},this._internalVariables.isVideo=function(e){var n=this.instance;return n._internalVariables.isFileType(e,n._internalVariables.videoFileTypes)},this._internalVariables.isAudio=function(e){var n=this.instance;return n._internalVariables.isFileType(e,n._internalVariables.audioFileTypes)},this._internalVariables.isDropFilesEnabled=function(){var e=this.instance,n=navigator.userAgent;if(!e.enableDropFiles||!(-1==n.indexOf("MSIE")||-1!=n.indexOf("MSIE 10.0")))return!1;var a=e._internalVariables.getIEVersion();return!((/Edge/.test(navigator.userAgent)||a>=0)&&"iframe"==e._internalVariables.getUploadType()||e._internalVariables.isMobileOrTablet())},this._internalVariables.getIframeGatewayFullUrl=function(){var e=this.instance,n="";return 0==e.iframeGateway.indexOf("//")||0==e.iframeGateway.indexOf("http://")||0==e.iframeGateway.indexOf("https://")?e.iframeGateway:window.location.href.substr(0,window.location.href.lastIndexOf("/"))+"/"+e.iframeGateway},this._internalVariables.validateIframeGatewayPath=function(){var e=this.instance,n=e._internalVariables.getIframeGatewayFullUrl();e._internalVariables.isCrossDomainScript(n)?e._internalVariables.consoleError("Iframe gateway must be at same domain as current page, not at "+n):noJquery.ajax({type:"HEAD",url:n,success:function(e){},error:function(a,r){e._internalVariables.consoleError("Iframe gateway can't be found at "+n)}})},this._internalVariables.getOrientation=function(e,n){if(65496!=(view=new DataView(e)).getUint16(0,!1))return n(-2);for(var a=view.byteLength,r=2;r<a&&!(8>=view.getUint16(r+2,!1));){var t=view.getUint16(r,!1);if(r+=2,65505==t){if(1165519206!=view.getUint32(r+=2,!1))return n(-1);var l=18761==view.getUint16(r+=6,!1);r+=view.getUint32(r+4,l);var i=view.getUint16(r,l);r+=2;for(var s=0;s<i;s++)if(274==view.getUint16(r+12*s,l))return n(view.getUint16(r+12*s+8,l))}else if((65280&t)!=65280)break;else r+=view.getUint16(r,!1)}return n(-1)},this._internalVariables.build()}var uploaerIframeGateway={objs:[],uploaderIframeActionCompleted:function(e,n){var a=this.objs[e];a.uploaderIframeActionCompletedCalled||(a.uploaderIframeActionCompletedCalled=!0,null!=a.actionCompletedFunc&&a.actionCompletedFunc(n),noJquery("iframe[data-request='"+e+"']").remove())},uploadViaIframeGateway:function(e,n,a,r,t){var l=Math.floor(999999999*Math.random()),i={};i.closed=!1,i.actionCompletedFunc=t,uploaerIframeGateway.objs[l]=i;var s=n+"_gateway_iframe";null==noJquery("#"+s).get(0)&&(noJquery("<iframe id='"+s+"' data-request='"+l+"' name='"+s+"' style='width: 1px; height: 1px; opacity: 0; display: none;'>").appendTo("body"),document.getElementById(s).onload=function(n){setTimeout(function(){e._internalVariables.isUploading&&(e._internalVariables.setError("network_error"),e._internalVariables.abortAndCancelUpload())},500)});var o=a;-1!=o.indexOf("?")?o+="&":o+="?",o=o.split("{{request_id}}").join(l).split("{{iframe_gateway}}").join(r),0==(o+="_="+Math.random()).indexOf("//")&&(o=window.location.protocol+o),noJquery("#"+n+"_form").html(""),noJquery("#"+n+"_input").appendTo("#"+n+"_form"),noJquery("#"+n+"_form").attr("action",o).attr("target",s).attr("enctype","multipart/form-data").attr("method","post").get(0).submit()},cancelUpload:function(e,n){var a=e+"_gateway_iframe";null==noJquery("#"+a).get(0)&&noJquery("<iframe id='"+a+"' name='"+a+"' style='width: 1px; height: 1px; opacity: 0; display: none;'>").appendTo("body"),noJquery("#"+e+"_form").attr("action",n).attr("target",a).attr("enctype","multipart/form-data").attr("method","get").get(0).submit()}};function noJquery(e){if(!(this instanceof noJquery))return new noJquery(e);if("function"==typeof e)return e.call(document);if(this.length=0,this.nodes=[],"object"==typeof HTMLElement?e instanceof HTMLElement:e&&"object"==typeof e&&null!==e&&1===e.nodeType&&"string"==typeof e.nodeName)this.nodes=e.length>1?[].slice.call(e):[e];else if("string"==typeof e){if(0==e.indexOf("<")){var n=document.createElement("div");n.innerHTML=e,this.nodes=[n.firstChild]}else{this.nodes=[];for(var a=document.querySelectorAll(e),r=0;r<a.length;r++)this.nodes.push(a.item(r))}}if(this.nodes.length){this.length=this.nodes.length;for(var r=0;r<this.nodes.length;r++)this[r]=this.nodes[r]}}noJquery.fn=noJquery.prototype,noJquery.fn.each=function(e){for(var n=0;n<this.length;n++)e.call(this[n],this,n);return this},noJquery.fn.hasClass=function(e){for(var n=!1,a=0;a<this.nodes.length;a++)this.nodes[a].classList?this.nodes[a].classList.contains(e)&&(n=!0):RegExp("(^| )"+e+"( |$)","gi").test(this.nodes[a].className)&&(n=!0);return n},noJquery.fn.addClass=function(e){if(!this.hasClass(e))for(var n=0;n<this.nodes.length;n++)this.nodes[n].className=this.nodes[n].className.trim()+" "+e;return this},noJquery.fn.removeClass=function(e){return this.each(function(){this.className=this.className.replace(RegExp("\\b"+e+"\\b","g"),"")}),this},noJquery.fn.text=function(e){return void 0===e&&(e=""),this.each(function(){this.innerText=e})},noJquery.fn.html=function(e){if(null==e||void 0===e)return null!=this.nodes&&this.nodes.length>0?this.nodes[0].innerHTML:null;for(var n=0;n<this.nodes.length;n++)this.nodes[n].innerHTML=e;return this},noJquery.fn.css=function(e,n){if(void 0!==e)for(var a=0;a<this.nodes.length;a++)if("width"!=e&&"height"!=e&&"left"!=e&&"top"!=e||isNaN(n)||null==n||""==n||(n+="px"),-1!=e.indexOf("-")){var r=e.split("-");r.length>1&&(r[1]=r[1].charAt(0).toUpperCase()+r[1].slice(1)),this.nodes[a].style[r.join("")]=n}else this.nodes[a].style[e]=n;return this},noJquery.events=[],noJquery.fn.on=function(e,n){for(var a=(e=e.split(" ").join("")).split(","),r=0;r<a.length;r++)this.each(function(){var t={elem:this,name:e};t.handler=function(e){e.originalEvent=e,null==e.pageX&&null!=e.clientX&&(-1!=navigator.appVersion.indexOf("MSIE")&&8==parseFloat(navigator.appVersion.split("MSIE")[1])?(e.pageX=e.clientX,e.pageY=e.clientY):(doc=(eventDoc=e.target.ownerDocument||document).documentElement,body=eventDoc.body,e.pageX=e.clientX+(doc&&doc.scrollLeft||body&&body.scrollLeft||0)-(doc&&doc.clientLeft||body&&body.clientLeft||0),e.pageY=e.clientY+(doc&&doc.scrollTop||body&&body.scrollTop||0)-(doc&&doc.clientTop||body&&body.clientTop||0))),n.call(this,e)},this.addEventListener(a[r],t.handler,!1),noJquery.events.push(t)});return this},noJquery.fn.unbind=function(e){for(var n=(e=e.split(" ").join("")).split(","),a=0;a<n.length;a++)this.each(function(){for(var r=0;r<noJquery.events.length;r++)noJquery.events[r].elem==this&&noJquery.events[r].name==e&&this.removeEventListener(n[a],noJquery.events[r].handler,!1)});return this},noJquery.fn.appendTo=function(e){return null!=this.nodes&&this.nodes.length>0&&document.querySelector(e).appendChild(this.nodes[0]),this},noJquery.fn.append=function(e){for(var n=0;n<this.nodes.length;n++)this.nodes[n].appendChild(e);return this},noJquery.fn.find=function(e){return null!=this.nodes&&this.nodes.length>0?new noJquery(this.nodes[0].querySelector(e)):this},noJquery.fn.attr=function(e,n){if(void 0===n)return null!=this.nodes&&this.nodes.length>0?this.nodes[0].getAttribute(e):null;for(var a=0;a<this.nodes.length;a++)this.nodes[a].setAttribute(e,n);return this},noJquery.fn.removeAttr=function(e){for(var n=0;n<this.nodes.length;n++)this.nodes[n].removeAttribute(e);return this},noJquery.fn.get=function(e){return null==this.nodes||0==this.nodes.length?null:this.nodes[e]},noJquery.fn.remove=function(){return null!=this.nodes&&this.nodes.length>0&&this.nodes[0].parentNode.removeChild(this.nodes[0]),this},noJquery.fn.parent=function(){return null!=this.nodes&&this.nodes.length>0&&(this.nodes=[this.nodes[0].parentNode]),this},noJquery.fn.outerWidth=function(){return null!=this.nodes&&this.nodes.length>0?this.nodes[0].offsetWidth:null},noJquery.fn.outerHeight=function(){return null!=this.nodes&&this.nodes.length>0?this.nodes[0].outerHeight:null},noJquery.fn.offset=function(){if(null!=this.nodes&&this.nodes.length>0){var e=this.nodes[0].getBoundingClientRect(),n=window.pageYOffset||document.body.scrollTop,a=window.pageXOffset||document.body.scrollLeft;return{top:e.top+n,left:e.left+a}}return null},noJquery.animations=[],noJquery.getAnimationByElementAndType=function(e,n){for(var a=0;a<noJquery.animations.length;a++)if(noJquery.animations[a].element==e&&noJquery.animations[a].animationType==n)return noJquery.animations[a];return curAnimation={element:e,animationType:n,animationFrame:null,timeout:null},noJquery.animations.push(curAnimation),curAnimation},noJquery.fn.fadeIn=function(e){this.animate({opacity:1},400,e)},noJquery.fn.fadeOut=function(e){this.animate({opacity:0},400,e)},noJquery.fn.animate=function(e,n,a){for(var r=0;r<this.nodes.length;r++){var t=this.nodes[r],l=0,i=0;for(var s in e){"opacity"==s&&void 0!==window.getComputedStyle&&(i=(l=parseInt(window.getComputedStyle(t).getPropertyValue("opacity")))<e[s]?1:-1);var o=noJquery.getAnimationByElementAndType(t,s);null!=o&&(null!=o.animationFrame&&window.cancelAnimationFrame(o.animationFrame),null!=o.timeout&&(clearTimeout(o.timeout),o.timeout=null))}var d=new Date;d.setMilliseconds(d.getMilliseconds()+n);var u=function(){for(var r in e){var s=noJquery.getAnimationByElementAndType(t,r);if("opacity"==r){var o=l+(e[r]-l)*(1-(d-new Date)/n);t.style.opacity=o,t.style.filter="alpha(opacity="+100*o|"0)",i>0&&o<e[r]||i<=0&&o>e[r]?window.requestAnimationFrame?s.animationFrame=requestAnimationFrame(u):s.timeout=setTimeout(u,16):(t.style.opacity=e[r],t.style.filter="alpha(opacity="+100*e[r]|"0)","function"==typeof a&&a())}}};u()}},noJquery.inArray=function(e,n){for(var a=0;a<n.length;a++)if(n[a]===e)return a;return -1},noJquery.extend=function(e){e=e||{};for(var n=1;n<arguments.length;n++)if(arguments[n])for(var a in arguments[n])arguments[n].hasOwnProperty(a)&&(e[a]=arguments[n][a]);return e},noJquery.ajax=function(e){if("jsonp"==e.dataType)return noJquery.jsonp(e);if("HEAD"==e.type){var n={},a=new XMLHttpRequest;return a.open(e.type,e.url),a.onreadystatechange=function(n){4===a.readyState&&(200===a.status?"function"==typeof e.success&&e.success(this.response):0===a.status?"function"==typeof e.error&&e.error(a,"abort"):"function"==typeof e.error&&e.error(a,"error"))},a.send(),n.xhr=n,n}return null},noJquery.jsonp=function(e){var n={},a="jsonp_callback_"+Math.round(1e5*Math.random()),r=document.createElement("script");return r.src=e.url+(e.url.indexOf("?")>=0?"&":"?")+"callback="+a,window[a]=function(n){window[a]=function(){},document.body.removeChild(r),r=null,e.success,e.success(n)},e.error,r.addEventListener("error",e.error),document.body.appendChild(r),n.abort=function(){window[a]=function(){};try{document.body.removeChild(r)}catch(n){}r=null,e.error,e.error(null,"abort")},n},window.noJquery=noJquery,"function"!=typeof String.prototype.trim&&(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),"function"!=typeof Array.isArray&&(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),Object.defineProperty&&function(){try{return Object.defineProperty({},"x",{}),!0}catch(e){return!1}}()||(Object.defineProperty=function e(n,a,r){if("get"in r&&"function"==typeof r.get)return r.get();"set"in r&&"function"==typeof r.set&&r.set()}),window.addEventListener||function(e,n,a,r,t,l,i){e[r]=n[r]=a[r]=function(e,n){var a=this;i.unshift([a,e,n,function(e){e.currentTarget=a,e.preventDefault=function(){e.returnValue=!1},e.stopPropagation=function(){e.cancelBubble=!0},e.target=e.srcElement||a,n.call(a,e)}]),this.attachEvent("on"+e,i[0][3])},e[t]=n[t]=a[t]=function(e,n){for(var a,r=0;a=i[r];++r)if(a[0]==this&&a[1]==e&&a[2]==n)return this.detachEvent("on"+e,i.splice(r,1)[0][3])},e[l]=n[l]=a[l]=function(e){return this.fireEvent("on"+e.type,e)}}(Window.prototype,HTMLDocument.prototype,Element.prototype,"addEventListener","removeEventListener","dispatchEvent",[]);